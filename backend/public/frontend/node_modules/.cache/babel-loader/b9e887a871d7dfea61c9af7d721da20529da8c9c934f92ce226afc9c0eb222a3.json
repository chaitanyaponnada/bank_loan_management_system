{"ast":null,"code":"import React,{useState}from'react';import'./AccountOverview.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL='http://localhost:3001/api/v1';function AccountOverview(){const[customerId,setCustomerId]=useState('');const[result,setResult]=useState(null);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const handleFetch=async e=>{e.preventDefault();if(!customerId.trim())return;setError('');setResult(null);setLoading(true);try{const response=await fetch(`${API_URL}/customers/${customerId}/overview`);const data=await response.json();if(!response.ok)throw new Error(data.error||'Failed to fetch overview.');setResult(data);}catch(err){setError(err.message);}finally{setLoading(false);}};const formatStatus=function(){let status=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return status.replace('_',' ').toUpperCase();};const formatCurrency=value=>{const number=parseFloat(value);return isNaN(number)?'N/A':`₹${number.toLocaleString('en-IN',{minimumFractionDigits:2})}`;};return/*#__PURE__*/_jsxs(\"div\",{className:\"overview-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"component-title\",children:\"Customer Account Overview\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFetch,className:\"form-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customerId,onChange:e=>setCustomerId(e.target.value),placeholder:\"Enter Customer ID to view loans\",required:true,disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Fetching...':'Get Overview'})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),result&&/*#__PURE__*/_jsxs(\"div\",{className:\"overview-results\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"overview-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"overview-customer-name\",children:result.customer_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"total-loans-info\",children:[\"Has \",/*#__PURE__*/_jsx(\"strong\",{children:result.total_loans}),\" active or paid loan(s).\"]})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"loans-list\",children:result.loans.map(loan=>/*#__PURE__*/_jsxs(\"li\",{className:\"loan-list-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loan-item-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loan-id-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Loan ID\"}),/*#__PURE__*/_jsx(\"code\",{className:\"loan-id-value\",children:loan.loan_id})]}),/*#__PURE__*/_jsx(\"span\",{className:`status-badge status-${loan.status}`,children:formatStatus(loan.status)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"loan-item-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-point\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Principal\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(loan.principal)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-point\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Total Payable\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(loan.total_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-point\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount Paid\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(loan.amount_paid)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-point\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"EMIs Left\"}),/*#__PURE__*/_jsx(\"span\",{children:loan.emis_left})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"loan-item-footer\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Created: \",new Date(loan.created_at).toLocaleString('en-IN',{timeZone:'Asia/Kolkata',dateStyle:'medium',timeStyle:'short'})]})})]},loan.loan_id))})]})]});}export default AccountOverview;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","API_URL","AccountOverview","customerId","setCustomerId","result","setResult","error","setError","loading","setLoading","handleFetch","e","preventDefault","trim","response","fetch","data","json","ok","Error","err","message","formatStatus","status","arguments","length","undefined","replace","toUpperCase","formatCurrency","value","number","parseFloat","isNaN","toLocaleString","minimumFractionDigits","className","children","onSubmit","type","onChange","target","placeholder","required","disabled","customer_name","total_loans","loans","map","loan","loan_id","principal","total_amount","amount_paid","emis_left","Date","created_at","timeZone","dateStyle","timeStyle"],"sources":["C:/Users/chait/OneDrive/Desktop/Projects/bank-loan-management-system/frontend/src/components/AccountOverview/AccountOverview.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './AccountOverview.css';\r\n\r\nconst API_URL = 'http://localhost:3001/api/v1';\r\nfunction AccountOverview() {\r\n    const [customerId, setCustomerId] = useState('');\r\n    const [result, setResult] = useState(null);\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleFetch = async (e) => {\r\n        e.preventDefault();\r\n        if (!customerId.trim()) return;\r\n        setError('');\r\n        setResult(null);\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_URL}/customers/${customerId}/overview`);\r\n            const data = await response.json();\r\n            if (!response.ok) throw new Error(data.error || 'Failed to fetch overview.');\r\n            setResult(data);\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const formatStatus = (status = '') => status.replace('_', ' ').toUpperCase();\r\n\r\n    const formatCurrency = (value) => {\r\n        const number = parseFloat(value);\r\n        return isNaN(number) ? 'N/A' : `₹${number.toLocaleString('en-IN', { minimumFractionDigits: 2 })}`;\r\n    };\r\n\r\n    return (\r\n        <div className=\"overview-container\">\r\n            <h2 className=\"component-title\">Customer Account Overview</h2>\r\n            \r\n            <form onSubmit={handleFetch} className=\"form-container\">\r\n                <input \r\n                    type=\"text\" \r\n                    value={customerId} \r\n                    onChange={(e) => setCustomerId(e.target.value)} \r\n                    placeholder=\"Enter Customer ID to view loans\" \r\n                    required \r\n                    disabled={loading}\r\n                />\r\n                <button type=\"submit\" disabled={loading}>\r\n                    {loading ? 'Fetching...' : 'Get Overview'}\r\n                </button>\r\n            </form>\r\n\r\n            {error && <p className=\"error\">{error}</p>}\r\n\r\n            {result && (\r\n                <div className=\"overview-results\">\r\n                    <div className=\"overview-header\">\r\n                        <h3 className=\"overview-customer-name\">{result.customer_name}</h3>\r\n                        <p className=\"total-loans-info\">\r\n                            Has <strong>{result.total_loans}</strong> active or paid loan(s).\r\n                        </p>\r\n                    </div>\r\n\r\n                    <ul className=\"loans-list\">\r\n                        {result.loans.map((loan) => (\r\n                            <li key={loan.loan_id} className=\"loan-list-item\">\r\n                                <div className=\"loan-item-header\">\r\n                                    <div className=\"loan-id-container\">\r\n                                        <span>Loan ID</span>\r\n                                        <code className=\"loan-id-value\">{loan.loan_id}</code>\r\n                                    </div>\r\n                                    <span className={`status-badge status-${loan.status}`}>\r\n                                        {formatStatus(loan.status)}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"loan-item-body\">\r\n                                    <div className=\"data-point\">\r\n                                        <label>Principal</label>\r\n                                        <span>{formatCurrency(loan.principal)}</span>\r\n                                    </div>\r\n                                    <div className=\"data-point\">\r\n                                        <label>Total Payable</label>\r\n                                        <span>{formatCurrency(loan.total_amount)}</span>\r\n                                    </div>\r\n                                    <div className=\"data-point\">\r\n                                        <label>Amount Paid</label>\r\n                                        <span>{formatCurrency(loan.amount_paid)}</span>\r\n                                    </div>\r\n                                    <div className=\"data-point\">\r\n                                        <label>EMIs Left</label>\r\n                                        <span>{loan.emis_left}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"loan-item-footer\">\r\n                                    <span>\r\n                                        Created: {new Date(loan.created_at).toLocaleString('en-IN', {\r\n                                            timeZone: 'Asia/Kolkata',\r\n                                            dateStyle: 'medium',\r\n                                            timeStyle: 'short',\r\n                                        })}\r\n                                    </span>\r\n                                </div>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AccountOverview;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}